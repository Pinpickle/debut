/*! oliver-and-swan 2014-02-19 */
!function(exports,global){function Animation(a,b){this.params=$.extend({easing:"easeInOutCubic"},b),this.fun=a,this.start="onstep",this.delay=0,this._elem=null,this.domClone=null,this.run=function(a,b){b||this.domClone||(this.domClone=$(this._elem).clone(),this.params.domClone=this.domClone);var c=this.params;b&&(c=$.extend({},this.params,{direction:-this.params.direction,domClone:this.domClone})),this.fun(this._elem,a,c,function(){})}}function toCamelCase(a,b){return"undefined"==typeof b&&(b="-"),a.split(b).map(function(a,b){return 0===b?a.charAt(0).toLowerCase()+a.slice(1):a.charAt(0).toUpperCase()+a.slice(1)}).join("")}global["true"]=exports;var $=jQuery,animations={appear:function(a,b,c,d){1===c.direction?$(a).css("opacity",""):-1===c.direction&&$(a).css("opacity",0),d()},slide:function(a,b,c){var d=0,e=0;c=$.extend({side:"left"},c),1===c.direction&&c.domClone&&$(a).css({x:$(c.domClone).css("x"),y:$(c.domClone).css("y")}),$(a).css("opacity",1);var f=$(a).offset();switch(f.left=(f.left-b.containerLeft)/b.scale,f.top=(f.top-b.containerTop)/b.scale,c.side){default:case"left":d=-($(a).width()+f.left);break;case"right":d=b.containerWidth-f.left;break;case"top":e=-($(a).height()+f.top);break;case"bottom":e=b.innerContainer.height()-f.top}1===c.direction&&$(a).css({x:"+="+c.direction*d,y:"+="+c.direction*e}),$(a).transit({x:"+="+-c.direction*d,y:"+="+-c.direction*e},c.duration,c.easing,c.callback)},animate:function(a,b,c){var d={};if(1===c.direction)d=c.prop;else{var e=$(c.domClone);for(var f in c.prop)d[f]=e.css(f)}$(a).transit(d,c.duration,c.easing,c.callback)}},slideMasterOptions=[{key:"letterbox",type:"boolean","default":!1},{key:"aspect-ratio",type:function(a){var b=a.split(":");return parseFloat(b[0])/parseFloat(b[1])},"default":16/9},{key:"container-height",type:"number","default":500}],presentationObjectOptions=[{key:"anim",type:"animation","default":null},{key:"end-exit-children",type:"boolean","default":!1},{key:"end-exit",type:"animation","default":null},{key:"anim-children-step",type:"animation","default":null}],animationQueue=[],OliverAndSwan=function(a,b){this.innerContainer=null,this.outerContainer=null,this.index=0;var c,d,e=$('<div class="presentation-container"></div>'),f=a,g=$(a).getDOMOptions(slideMasterOptions),h=this;$(a).addClass("presentation-master"),b=$.extend({},g,b),this.containerHeight=b.containerHeight,this.containerWidth=this.containerHeight*b.aspectRatio,this.scale=1,e.height(this.containerHeight),e.width(this.containerWidth),e.css("transform-origin","0 0"),this.containerLeft=0,this.containerTop=0,this.resize=function(){var a;(f.width()!=c||f.height()!=d)&&(c=f.width(),d=f.height(),a=c/d,a>b.aspectRatio?(h.scale=d/h.containerHeight,h.containerLeft=(c-h.scale*h.containerWidth)/2,h.containerTop=0):(h.scale=c/h.containerWidth,h.containerLeft=0,h.containerTop=(d-h.scale*h.containerHeight)/2),e.css({left:h.containerLeft,top:h.containerTop}),e.css("scale",h.scale))},$(window).resize(this.resize),this.resize(),$(a).children("*").appendTo(e),e.appendTo(a),this.outerContainer=$(a),this.innerContainer=e,b.letterbox&&(console.log(b),$(this.outerContainer).addClass("letterbox"));var i=function(){var a=$(this).getDOMOptions(presentationObjectOptions),b=$(this);if(a.anim&&(b.css("opacity",0),a.anim.params=$.extend({},{direction:1,duration:500,easing:"in-out"},a.anim.params),animationQueue.push(a.anim)),a.animChildrenStep&&$(this).children().each(function(a,c){(void 0===$(c).attr("data-anim")||$(c).attr("data-anim")===!1)&&$(c).attr("data-anim",b.attr("data-anim-children-step"))}),$(this).children().each(i),a.endExitChildren){$(this).children().each(function(a,b){j(b,!0)})}else a.endExit&&(a.endExit.params=$.extend({},{direction:-1,duration:500,easing:"in-out"},a.endExit.params),animationQueue.push(a.endExit))},j=function(a){var b=$(a).getDOMOptions(presentationObjectOptions);a=$(a),b.anim&&!b.exit&&(b.exit=$.extend(!0,new Animation,b.anim)),b.exit&&(b.exit.params=$.extend({},{direction:-1,duration:500,easing:"in-out"},b.exit.params),b.exit._elem=a,b.exit.start=0!==a.index()?"withprevious":"onstep",animationQueue.push(b.exit))};this.innerContainer.children().each(i),$(window).keydown(function(a){(39===a.which||37===a.which)&&h.proceed(37===a.which)}),$(this.outerContainer).click(function(){h.proceed()}),this.proceed=function(a){var b,c;if(a=!!a){if(h.index<=0)return;h.index-=1}else if(h.index>=animationQueue.length)return;b=animationQueue[h.index],c=b.constructor.name,b.run(h,a),a||(h.index+=1),h.index in animationQueue&&"withprevious"===animationQueue[h.index].start&&(0===b.delay?h.proceed(a):setTimeout(function(){h.proceed(a)},b.delay))}};$.fn.getDOMOptions=function(template){var i,attr,type,key,val,options={};for(i in template){if(key=toCamelCase(template[i].key),attr=this.attr("data-"+template[i].key),"undefined"!=typeof attr)switch(type=template[i].type,typeof type){case"string":switch(type){case"boolean":options[key]=!1,(attr||""===attr)&&(options[key]=!0);break;case"number":case"float":val=parseFloat(attr),isNaN(val)?""===attr&&(options[key]=0):options[key]=val;break;case"animation":var anim=attr,parsed=attr?attr.match(/([^{]+){([\s\S]+)/m):null,params={};if(parsed)params=eval("({"+parsed[2]+")"),anim=parsed[1];else if(parsed=attr?attr.match(/^{([\s\S]*)}$/m):null){console.log(parsed[1]);var fun=eval("(function(elem,context,params,callback) {"+parsed[1]+"})");options[key]=new Animation(fun,params);break}options[key]=anim in animations?new Animation(animations[anim],params):new Animation(animations.appear,params),options[key]._elem=$(this),params.start&&(options[key].start=params.start),params.on&&(options[key]._elem=$(params.on));break;case"string":default:options[key]=attr}break;case"function":val=type(attr),"undefined"!=typeof val&&(options[key]=val);break;default:options[key]=attr}options.hasOwnProperty(key)||(options[key]=template[i].default)}return options},$.fn.present=function(a){new OliverAndSwan($(this),a)},$.OliverAndSwan=OliverAndSwan,OliverAndSwan.animations=animations}({},function(){return this}());