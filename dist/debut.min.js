!function(e,t){"function"==typeof define&&define.amd?define(["jquery","jquery.transit"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("jquery.transit")):e.Debut=t(e.jQuery,e.jQuery.transit)}(this,function(e,t){var i;return function n(e,t,i){function s(o,a){if(!t[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=t[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return s(i?i:t)},h,h.exports,n,e,t,i)}return t[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,i,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t("./animations"),o=s(r),a=e,u=function l(e,t){this.options=a.extend({},l.defaultOptions,e.defaultOptions||{},t),this.definition=e,this.easing=this.options.easing,this.duration=this.options.duration,this.delay=this.options.delay,this.start=this.options.start,this.element=this.options.element,this.$element=a(this.element),this.direction=this.options.direction*(this.options.reverse?-1:1),this.isJQuery=this.element instanceof a,this.isOnDOM=this.element instanceof HTMLElement||this.isJQuery,this.firstRun=!0,this.store={},this.isHidden()&&1===this.direction&&this.$element.css("visibility","hidden")};u.prototype.run=function(e,t){if(t=t||function(){},this.firstRun&&!e.reversed&&this.definition.beforeState&&(this.definition.beforeState.call(this,e),this.firstRun=!1),e.duration=e.fast?0:this.duration,this.definition.prepare&&this.definition.prepare.call(this,e),this.isHidden())if(1===e.direction)this.$element.css("visibility","");else{var i=t;t=function(){this.$element.css("visibility","hidden"),i()}.bind(this)}this.definition.call(this,e,t)},u.prototype.isHidden=function(){return this.isOnDOM&&this.options.entrance},u.defaultOptions={easing:"easeInOutCubic",duration:500,delay:0,start:"step",element:null,entrance:!1,reverse:!1,direction:1},u._runArray=function(e,t,i){var n=t.direction;"undefined"==typeof i&&(i=1===n?0:e.length),-1===n&&(i-=1);var s=e[i],r=null,o=null,a=!1;1===n?(i+=1,i<e.length?(r=e[i],o=r.start):a=!0):i>0?(r=e[i-1],o=s.start):a=!0;var l=a?t.callback:void 0;if("after"==o){l=u._runArray.bind(this,e,t,i);var h=1===n?r:s;if(h.delay>0&&!t.fast){var d=l;l=function(){setTimeout(d,h.delay)}}}var c={debut:t.debut,direction:s.direction*n,reversed:-1===n,fast:t.fast},f=function(){if(s.run(c,l),"with"==o)if(1===n)r.delay>0&&!t.fast?setTimeout(u._runArray.bind(this,e,t,i),r.delay):u._runArray(e,t,i);else if(s.delay>0&&!t.fast){var a=Math.max(s.delay+s.duration-r.duration,0);setTimeout(u._runArray.bind(this,e,t,i),a)}else u._runArray(e,t,i)}.bind(this);s.delay>0&&!t.fast&&1===n&&"start"===s.step?setTimeout(f,s.delay):f()},u.animations=o["default"],n["default"]=u,i.exports=n["default"]},{"./animations":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={};n.appear=function(e,t){setTimeout(t.bind(this),e.duration)},n.appear.beforeState=function(e){},n.appear.defaultOptions={entrance:!0,duration:0},n.slide=function(e,t){this.$element.transit({x:"+="+-e.direction*this.store.leftShift,y:"+="+-e.direction*this.store.topShift},e.duration,this.options.easing,t)},n.slide.prepare=function(e){var t=0,i=0;1===e.direction&&this.$element.css({x:this.store.x,y:this.store.y});var n=e.debut.offset(this.$element);switch(this.options.from){default:case"left":t=-(this.$element.width()+n.left);break;case"right":t=e.debut.bounds.visibleWidth-n.left;break;case"top":i=-(this.$element.height()+n.top);break;case"bottom":i=e.debut.bounds.visibleHeight-n.top}1===e.direction&&this.$element.css({x:"+="+e.direction*t,y:"+="+e.direction*i}),this.store.leftShift=t,this.store.topShift=i},n.slide.beforeState=function(e){this.store.x=this.$element.css("x"),this.store.y=this.$element.css("y")},n.slide.defaultOptions={entrance:!0,from:"left"},n.animatecss=function(e,t){var i=e.reversed?this.store.props:this.options.props;this.$element.transit(i,e.duration,this.options.easing,t)},n.animatecss.beforeState=function(e){this.store.props={};for(var t in this.options.props)this.store.props[t]=this.$element.css(t)},n.animatecss.defaultOptions={easing:"ease"},n.animate=function(e,t){var i=e.reversed?this.store.props:this.options.props;this.$element.animate(i,e.duration,this.options.easing,t)},n.animate.beforeState=function(e){this.store.props={};for(var t in this.options.props)this.store.props[t]=this.$element.attr(t)},n.animate.defaultOptions={easing:"swing"},i["default"]=n,t.exports=i["default"]},{}],3:[function(t,i,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t("./animation"),o=s(r),a=t("./presenter"),u=s(a),l=t("screenfull"),h=s(l),d=e,c=function f(e,t){this.$={},this.elements={},this.options=d.extend({},f.defaultOptions,t),this.elements.container=e,this.$.container=d(this.elements.container),this.$.container.addClass("debut-container"),this.$.container.attr("tabindex","1"),this.$.innerContainer=this.$.container.wrapInner('<div class="debut-container-inner">').children(),this.$.innerContainer.css({width:this.options.baseWidth,height:this.options.baseWidth/this.options.aspect}),this.elements.innerContainer=this.$.innerContainer[0],this._presenterViewWindow=null,this.bounds={},this.animationQueue=[],this.animationIndex=0,this.milestones=[],this.options.full&&this.$.container.addClass("debut-full"),this.options.letterbox&&this.$.container.addClass("debut-letterbox"),this._addEventListeners(),this.milestone("Start")};c.prototype.resize=function(e){var t=this.bounds;t.width=this.$.innerContainer.width(),t.height=this.$.innerContainer.height(),t.outerWidth=this.$.container.width(),t.outerHeight=this.$.container.height(),t.aspect=t.outerWidth/t.outerHeight,this.options.letterbox?(t.visibleWidth=t.width,t.visibleHeight=t.height):(t.visibleWidth=t.outerWidth,t.visibleHeight=t.outerHeight),t.aspect>this.options.aspect?(t.scale=t.outerHeight/(this.options.baseWidth/this.options.aspect),t.top=0,t.left=(t.outerWidth-this.options.baseWidth*t.scale)/2):(t.scale=t.outerWidth/this.options.baseWidth,t.top=(t.outerHeight-this.options.baseWidth/this.options.aspect*t.scale)/2,t.left=0),this.$.innerContainer.css({scale:t.scale,top:t.top,left:t.left})},c.prototype._addEventListeners=function(){if(this.resize(),d(window).on("resize",this.resize.bind(this)),this.$.container.click(function(){1===this._focusState?this._focusState=0:0===this._focusState&&this.next()}.bind(this)),this.$.container.on("focus",function(){this._focusState=1}.bind(this)),this.$.container.on("blur",function(){this._focusState=2}.bind(this)),d(window).on("beforeunload",function(){this._presenterViewWindow&&this._presenterViewWindow.close()}.bind(this)),this.options.keys){var e=function(e,t,i){var n=this;this.options.keys[e].forEach(function(e){t.which===e&&i.call(n)})}.bind(this);this.$.container.keyup(function(t){e("next",t,this.next),e("prev",t,this.prev),e("presenter",t,this.openPresenterView.bind(this,this.options.presenterUrl)),e("fullscreen",t,this.toggleFullscreen)}.bind(this))}},c.prototype.step=function(e,t,i){if("string"==typeof e&&(e=d(e)[0]),t=c.animations[t],t=new o["default"](t,d.extend({},{element:e},i)),"step"!==t.start){if(0===this.animationQueue.length)throw new Error("First animation start type must be step");var n=this.animationQueue.pop();n instanceof Array?(n.push(t),t=n):t=[n,t]}return this.animationQueue.push(t),this},c.prototype.and=function(e,t,i){return i=d.extend({start:"with"},i),this.step(e,t,i)},c.prototype.then=function(e,t,i){return i=d.extend({start:"after"},i),this.step(e,t,i)},c.prototype.next=function(){this.animationIndex<this.animationQueue.length&&this.proceed(1)},c.prototype.prev=function(){this.animationIndex>0&&this.proceed(-1)},c.prototype.proceed=function(e,t,i){console.log(this.animationIndex),-1===e&&(this.animationIndex-=1);var n=this.animationQueue[this.animationIndex];1===e&&(this.animationIndex+=1);var s={direction:e,reversed:-1===e,debut:this,fast:!!i};n instanceof Array?(s.callback=t,o["default"]._runArray(n,s)):(s.direction*=n.direction,n.run(s,t))},c.prototype.goTo=function(e,t){e=Math.max(0,Math.min(this.animationQueue.length,e));var i=e-this.animationIndex;if(0!==i){var n=i>0?1:-1;console.log(n,i);var s=function(){var i=t;(1===n&&this.animationIndex<e-1||-1===n&&this.animationIndex>e+1)&&(i=s),this.proceed(n,i,!0)}.bind(this);s()}},c.prototype.milestone=function(e,t){var i=this.animationQueue.length,n=null;this.milestones.length>0&&(n=this.milestones[this.milestones.length-1]),null!==n&&n.index===i&&this.milestones.pop();var s={name:e,index:i,metadata:t};return this.milestones.push(s),this},c.prototype.toggleFullscreen=function(){h["default"].enabled&&h["default"].toggle(this.elements.container)},c.prototype.openPresenterView=function(e,t){return this._presenterViewWindow&&this._presenterViewWindow.close(),this._presenterViewWindow=window.open(e,"Debut Presenter View","height=800,width=1000,modal=yes"),console.log(this._presenterViewWindow),this._presenterViewWindow.onload=function(){this.presenterView=new u["default"](d(this._presenterViewWindow.document).find(".debut-presenter-view")[0],this,this._presenterViewWindow),t&&t()}.bind(this),d(this._presenterViewWindow).on("beforeunload",function(){this._presenterViewWindow=null,this.presenterView=null}.bind(this)),this.presenterView},c.prototype.getAnimation=function(e){return 0>e||e>=this.animationQueue.length?null:this.animationQueue[e]},c.prototype.offset=function(e){e instanceof d||(e=d(e));var t=e.offset();return t.left=(t.left-this.bounds.left)/this.bounds.scale,t.top=(t.top-this.bounds.top)/this.bounds.scale,t},c.defaultOptions={full:!0,fullscreen:!1,aspect:16/9,baseWidth:1e3,letterbox:!0,keys:{next:[39,34],prev:[37,33],presenter:[80],fullscreen:[70]},presenterUrl:"presenter.html"},c.Animation=o["default"],c.animations=o["default"].animations,c.PresenterView=u["default"],n["default"]=c,i.exports=n["default"]},{"./animation":1,"./presenter":4,screenfull:5}],4:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e,r=function(e,t,i,n){this.debut=t,"undefined"==typeof i&&(i=window),"undefined"==typeof n&&(n=i.document),this.elements={container:e,window:i,document:n},this.$={container:s(e),window:s(i),document:s(n)},this.$.milestones=this.$.container.find(".debut-milestones"),this.elements.milestones=this.$.milestones[0],this._addMilestones(),this.$.container.find(".debut-button-next").click(t.next.bind(t)),this.$.container.find(".debut-button-prev").click(t.prev.bind(t)),this.resetTimer(),this.startTimer(),this.$.container.find(".debut-button-reset-timer").click(this.resetTimer.bind(this)),this.$.container.find(".debut-button-pause-timer").click(this.toggleTimer.bind(this))};r.prototype._addMilestones=function(){console.log("Add milestones",this.debut.milestones),this.debut.milestones.forEach(function(e){console.log(e);var t=s('<button class="debut-button debut-milestone">'+e.name+"</div>");t.click(function(){this.debut.goTo(e.index)}.bind(this)),this.$.milestones.append(t)}.bind(this))},r.prototype.startTimer=function(){if(console.log("Start"),!this.isPlaying()){var e=Date.now();this.startTime+=e-this.lastTime,this.lastTime=e,this.interval=setInterval(this._renderTimer.bind(this),500),this._renderTimer(),this.$.document.find(".debut-button-pause-timer").text("Pause Timer")}},r.prototype.pauseTimer=function(){console.log("Pause"),this.isPlaying()&&(clearInterval(this.interval),this.interval=null,this.$.document.find(".debut-button-pause-timer").text("Start Timer"))},r.prototype.resetTimer=function(){this.startTime=Date.now(),this.lastTime=Date.now(),this._renderTimer(),this.isPlaying()&&(this.pauseTimer(),this.startTimer())},r.prototype.toggleTimer=function(){this.isPlaying()?this.pauseTimer():this.startTimer()},r.prototype.isPlaying=function(){return null!=this.interval},r.prototype._renderTimer=function(){var e=Date.now(),t=e-this.startTime;this.lastTime=e;var i=Math.floor(t/6e4),n=Math.floor(t/1e3-60*i);this.$.document.find(".debut-timer-number.debut-minutes").text(i),this.$.document.find(".debut-timer-number.debut-seconds").text(n)},n["default"]=r,i.exports=n["default"]},{}],5:[function(e,t,i){!function(){"use strict";var e="undefined"!=typeof t&&t.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var e,t,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,s=i.length,r={};s>n;n++)if(e=i[n],e&&e[1]in document){for(n=0,t=e.length;t>n;n++)r[i[0][n]]=e[n];return r}return!1}(),s={request:function(e){var t=n.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[t]():e[t](i&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[n.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:n};return n?(Object.defineProperties(s,{isFullscreen:{get:function(){return!!document[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[n.fullscreenEnabled]}}}),void(e?t.exports=s:window.screenfull=s)):void(e?t.exports=!1:window.screenfull=!1)}()},{}],6:[function(e,t,n){"use strict";i=e("./debut")},{"./debut":3}]},{},[6]),i});
