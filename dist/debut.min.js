!function(e,t){"function"==typeof define&&define.amd?define(["jquery","jquery.transit"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("jquery.transit")):e.Debut=t(e.jQuery,e.jQuery.transit)}(this,function(e,t){var i;return function n(e,t,i){function s(r,a){if(!t[r]){if(!e[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var h=t[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return s(i?i:t)},h,h.exports,n,e,t,i)}return t[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t,i,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./animations"),r=s(o),a=e,u=function l(e,t){this.options=a.extend({},l.defaultOptions,e.defaultOptions||{},t),this.definition=e,this.easing=this.options.easing,this.duration=this.options.duration,this.delay=this.options.delay,this.start=this.options.start,this.element=this.options.element,this.$element=a(this.element),this.direction=this.options.direction*(this.options.reverse?-1:1),this.isJQuery=this.element instanceof a,this.isOnDOM=this.element instanceof HTMLElement||this.isJQuery,this.firstRun=!0,this.stores=[],this.contexts=[],this.elements=[],this.$elements=[],this.isHidden()&&1===this.direction&&this.$element.css("visibility","hidden");var i=this;this.options.separateElements?this.$element.each(function(){i.stores.push({}),i.contexts.push({}),i.elements.push(this),i.$elements.push(a(this))}):(i.stores.push({}),i.contexts.push({}),i.elements.push(this.element),i.$elements.push(this.$element))};u.prototype._run=function(e,t){t=t||function(){},e.duration=e.fast?0:this.duration,e.options=this.options;var i=[];this.$elements.forEach(function(e,t){i[t]=1}),this.$elements.forEach(function(n,s){var o=this.contexts[s],r=!1,a=function(){i[s]=0,r||-1!==i.indexOf(1)||(r=!0,t())};for(var u in e)o[u]=e[u];o.element=this.elements[s],o.$element=this.$elements[s],o.store=this.stores[s],this._runWithContext(o,a)}.bind(this)),this.firstRun=!1},u.prototype._runWithContext=function(e,t){if(this.firstRun&&!e.reversed&&this.definition.beforeState&&this.definition.beforeState.call(this,e),this.definition.prepare&&this.definition.prepare.call(this,e),this.isHidden())if(1===e.direction)e.$element.css("visibility","");else{var i=t;t=function(){e.$element.css("visibility","hidden"),i()}.bind(this)}this.definition.call(this,e,t)},u.prototype.isHidden=function(){return this.isOnDOM&&this.options.entrance},u.defaultOptions={easing:"easeInOutCubic",duration:500,delay:0,start:"step",element:null,entrance:!1,reverse:!1,direction:1,separateElements:!0},u._runArray=function(e,t,i){var n=t.direction;"undefined"==typeof i&&(i=1===n?0:e.length),-1===n&&(i-=1);var s=e[i],o=null,r=null,a=!1;1===n?(i+=1,i<e.length?(o=e[i],r=o.start):a=!0):i>0?(o=e[i-1],r=s.start):a=!0;var l=a?t.callback:void 0;if("after"==r){l=u._runArray.bind(this,e,t,i);var h=1===n?o:s;if(h.delay>0&&!t.fast){var d=l;l=function(){setTimeout(d,h.delay)}}}var c={debut:t.debut,direction:s.direction*n,reversed:-1===n,fast:t.fast},f=function(){if(s._run(c,l),"with"==r)if(1===n)o.delay>0&&!t.fast?setTimeout(u._runArray.bind(this,e,t,i),o.delay):u._runArray(e,t,i);else if(s.delay>0&&!t.fast){var a=Math.max(s.delay+s.duration-o.duration,0);setTimeout(u._runArray.bind(this,e,t,i),a)}else u._runArray(e,t,i)}.bind(this);s.delay>0&&!t.fast&&1===n&&"start"===s.step?setTimeout(f,s.delay):f()},u.animations=r["default"],n["default"]=u,i.exports=n["default"]},{"./animations":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={};n.appear=function(e,t){setTimeout(t.bind(this),e.duration)},n.appear.beforeState=function(e){},n.appear.defaultOptions={entrance:!0,duration:0},n.fade=function(e,t){e.$element.transit({opacity:1===e.direction?e.store.opacity:0},{duration:e.duration,easing:e.options.easing,complete:t})},n.fade.prepare=function(e){1===e.direction&&e.$element.css("opacity",0)},n.fade.beforeState=function(e){e.store.opacity=e.$element.css("opacity")},n.fade.defaultOptions={entrance:!0,duration:500},n.slide=function(e,t){e.$element.transit({x:"+="+-e.direction*e.store.leftShift,y:"+="+-e.direction*e.store.topShift},{duration:e.duration,easing:e.options.easing,complete:t})},n.slide.prepare=function(e){var t=0,i=0;1===e.direction&&e.$element.css({x:e.store.x,y:e.store.y});var n=e.debut.offset(e.$element);switch(e.options.from){default:case"left":t=-(e.$element.width()+n.left);break;case"right":t=e.debut.bounds.visibleWidth-n.left;break;case"top":i=-(e.$element.height()+n.top);break;case"bottom":i=e.debut.bounds.visibleHeight-n.top}1===e.direction&&e.$element.css({x:"+="+e.direction*t,y:"+="+e.direction*i}),e.store.leftShift=t,e.store.topShift=i},n.slide.beforeState=function(e){e.store.x=e.$element.css("x"),e.store.y=e.$element.css("y")},n.slide.defaultOptions={entrance:!0,from:"left"},n.toggleclass=function(e,t){var i=!e.store.hasClass&&!e.reversed;i?e.$element.addClass(e.options["class"]):e.$element.removeClass(e.options["class"]),setTimeout(t.bind(this),e.duration)},n.toggleclass.beforeState=function(e){e.store.hasClass=e.$element.hasClass(e.options["class"])},n.toggleclass.defaultOptions={duration:0},n.animatecss=function(e,t){var i=e.reversed?e.store.props:e.options.props;e.$element.transit(i,{duration:e.duration,easing:e.options.easing,complete:t,queue:!1})},n.animatecss.beforeState=function(e){e.store.props={};for(var t in e.options.props)e.store.props[t]=e.$element.css(t)},n.animatecss.defaultOptions={easing:"ease"},n.animate=function(e,t){var i=e.reversed?e.store.props:e.options.props;e.$element.animate(i,{duration:e.duration,easing:e.options.easing,complete:t,queue:!1})},n.animate.beforeState=function(e){e.store.props={};for(var t in e.options.props)e.store.props[t]=e.$element.attr(t)},n.animate.defaultOptions={easing:"swing"},i["default"]=n,t.exports=i["default"]},{}],3:[function(t,i,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./animation"),r=s(o),a=t("./presenter"),u=s(a),l=t("screenfull"),h=s(l),d=e,c=function f(e,t){this.$={},this.elements={},this.options=d.extend({},f.defaultOptions,t),this.elements.container=e,this.$.container=d(this.elements.container),this.$.container.addClass("debut-container"),this.$.container.attr("tabindex","1"),this.$.innerContainer=this.$.container.wrapInner('<div class="debut-container-inner">').children(),this.$.innerContainer.css({width:this.options.baseWidth,height:this.options.baseWidth/this.options.aspect}),this.elements.innerContainer=this.$.innerContainer[0],this._presenterViewWindow=null,this.bounds={},this.animationQueue=[],this.animationIndex=0,this.milestones=[],this.options.full&&this.$.container.addClass("debut-full"),this.options.letterbox&&this.$.container.addClass("debut-letterbox"),this._addEventListeners(),this.milestone("Start")};c.prototype.resize=function(e){var t=this.bounds;t.width=this.$.innerContainer.width(),t.height=this.$.innerContainer.height(),t.outerWidth=this.$.container.width(),t.outerHeight=this.$.container.height(),t.aspect=t.outerWidth/t.outerHeight,this.options.letterbox?(t.visibleWidth=t.width,t.visibleHeight=t.height):(t.visibleWidth=t.outerWidth,t.visibleHeight=t.outerHeight),t.aspect>this.options.aspect?(t.scale=t.outerHeight/(this.options.baseWidth/this.options.aspect),t.top=0,t.left=(t.outerWidth-this.options.baseWidth*t.scale)/2):(t.scale=t.outerWidth/this.options.baseWidth,t.top=(t.outerHeight-this.options.baseWidth/this.options.aspect*t.scale)/2,t.left=0),this.$.innerContainer.css({scale:t.scale,top:t.top,left:t.left})},c.prototype._addEventListeners=function(){if(this.resize(),d(window).on("resize",this.resize.bind(this)),this.$.container.click(function(){1===this._focusState?this._focusState=0:0===this._focusState&&this.next()}.bind(this)),this.$.container.on("focus",function(){this._focusState=1}.bind(this)),this.$.container.on("blur",function(){this._focusState=2}.bind(this)),d(window).on("beforeunload",function(){this._presenterViewWindow&&this._presenterViewWindow.close()}.bind(this)),this.options.keys){var e=function(e,t,i){var n=this;this.options.keys[e].forEach(function(e){t.which===e&&i.call(n)})}.bind(this);this.$.container.keyup(function(t){e("next",t,this.next),e("prev",t,this.prev),e("presenter",t,this.openPresenterView.bind(this,this.options.presenterUrl)),e("fullscreen",t,this.toggleFullscreen)}.bind(this))}},c.prototype.step=function(e,t,i){if("string"==typeof e&&(e=d(e)),"string"==typeof t&&(t=c.animations[t]),t=new r["default"](t,d.extend({},{element:e},i)),"step"!==t.start){if(0===this.animationQueue.length)throw new Error("First animation start type must be step");var n=this.animationQueue.pop();n instanceof Array?(n.push(t),t=n):t=[n,t]}return this.animationQueue.push(t),this},c.prototype.and=function(e,t,i){return i=d.extend({start:"with"},i),this.step(e,t,i)},c.prototype.then=function(e,t,i){return i=d.extend({start:"after"},i),this.step(e,t,i)},c.prototype.next=function(){this.animationIndex<this.animationQueue.length&&this.proceed(1)},c.prototype.prev=function(){this.animationIndex>0&&this.proceed(-1)},c.prototype.proceed=function(e,t,i){-1===e&&(this.animationIndex-=1);var n=this.animationQueue[this.animationIndex];1===e&&(this.animationIndex+=1);var s={direction:e,reversed:-1===e,debut:this,fast:!!i};n instanceof Array?(s.callback=t,r["default"]._runArray(n,s)):(s.direction*=n.direction,n._run(s,t))},c.prototype.goTo=function(e,t){if("string"==typeof e){var i=!1;this.milestones.forEach(function(t){i||t.name.toLocaleLowerCase()!==e.toLocaleLowerCase()||(i=!0,e=t.index)})}e=Math.max(0,Math.min(this.animationQueue.length,e));var n=e-this.animationIndex;if(0!==n){var s=n>0?1:-1;console.log(s,n,e);var o=function(){var i=t;(1===s&&this.animationIndex<e-1||-1===s&&this.animationIndex>e+1)&&(i=o),this.proceed(s,i,!0)}.bind(this);o()}},c.prototype.milestone=function(e,t){var i=this.animationQueue.length,n=null;this.milestones.length>0&&(n=this.milestones[this.milestones.length-1]),null!==n&&n.index===i&&this.milestones.pop();var s={name:e,index:i,metadata:t};return this.milestones.push(s),this},c.prototype.toggleFullscreen=function(){h["default"].enabled&&h["default"].toggle(this.elements.container)},c.prototype.openPresenterView=function(e,t){return this._presenterViewWindow&&this._presenterViewWindow.close(),this._presenterViewWindow=window.open(e,"Debut Presenter View","height=800,width=1000,modal=yes"),console.log(this._presenterViewWindow),this._presenterViewWindow.onload=function(){this.presenterView=new u["default"](d(this._presenterViewWindow.document).find(".debut-presenter-view")[0],this,this._presenterViewWindow),t&&t()}.bind(this),d(this._presenterViewWindow).on("beforeunload",function(){this._presenterViewWindow=null,this.presenterView=null}.bind(this)),this.presenterView},c.prototype.getAnimation=function(e){return 0>e||e>=this.animationQueue.length?null:this.animationQueue[e]},c.prototype.offset=function(e){e instanceof d||(e=d(e));var t=e.offset();return t.left=(t.left-this.bounds.left)/this.bounds.scale,t.top=(t.top-this.bounds.top)/this.bounds.scale,t},c.defaultOptions={full:!0,fullscreen:!1,aspect:16/9,baseWidth:1e3,letterbox:!0,keys:{next:[39,34],prev:[37,33],presenter:[80],fullscreen:[70]},presenterUrl:"presenter.html"},c.Animation=r["default"],c.animations=r["default"].animations,c.PresenterView=u["default"],n["default"]=c,i.exports=n["default"]},{"./animation":1,"./presenter":4,screenfull:5}],4:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e,o=function(e,t,i,n){if(this.debut=t,"undefined"==typeof i&&(i=window),"undefined"==typeof n&&(n=i.document),this.elements={container:e,window:i,document:n},this.$={container:s(e),window:s(i),document:s(n)},this.$.milestones=this.$.container.find(".debut-milestones"),this.elements.milestones=this.$.milestones[0],this._addMilestones(),this.$.container.find(".debut-button-next").click(t.next.bind(t)),this.$.container.find(".debut-button-prev").click(t.prev.bind(t)),this.resetTimer(),this.startTimer(),this.$.container.find(".debut-button-reset-timer").click(this.resetTimer.bind(this)),this.$.container.find(".debut-button-pause-timer").click(this.toggleTimer.bind(this)),this.debut.options.keys){var o=function(e,t,i){var n=this;this.debut.options.keys[e].forEach(function(e){t.which===e&&i.call(n)})}.bind(this);this.$.window.keyup(function(e){o("next",e,t.next.bind(t)),o("prev",e,t.prev.bind(t))}.bind(this))}};o.prototype._addMilestones=function(){console.log("Add milestones",this.debut.milestones),this.debut.milestones.forEach(function(e){console.log(e);var t=s('<button class="debut-button debut-milestone">'+e.name+"</div>");t.click(function(){this.debut.goTo(e.index)}.bind(this)),this.$.milestones.append(t)}.bind(this))},o.prototype.startTimer=function(){if(console.log("Start"),!this.isPlaying()){var e=Date.now();this.startTime+=e-this.lastTime,this.lastTime=e,this.interval=setInterval(this._renderTimer.bind(this),500),this._renderTimer(),this.$.document.find(".debut-button-pause-timer").text("Pause Timer")}},o.prototype.pauseTimer=function(){console.log("Pause"),this.isPlaying()&&(clearInterval(this.interval),this.interval=null,this.$.document.find(".debut-button-pause-timer").text("Start Timer"))},o.prototype.resetTimer=function(){this.startTime=Date.now(),this.lastTime=Date.now(),this._renderTimer(),this.isPlaying()&&(this.pauseTimer(),this.startTimer())},o.prototype.toggleTimer=function(){this.isPlaying()?this.pauseTimer():this.startTimer()},o.prototype.isPlaying=function(){return null!==this.interval},o.prototype._renderTimer=function(){var e=Date.now(),t=e-this.startTime;this.lastTime=e;var i=Math.floor(t/6e4),n=Math.floor(t/1e3-60*i);this.$.document.find(".debut-timer-number.debut-minutes").text(i),this.$.document.find(".debut-timer-number.debut-seconds").text(n)},n["default"]=o,i.exports=n["default"]},{}],5:[function(e,t,i){!function(){"use strict";var e="undefined"!=typeof t&&t.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var e,t,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,s=i.length,o={};s>n;n++)if(e=i[n],e&&e[1]in document){for(n=0,t=e.length;t>n;n++)o[i[0][n]]=e[n];return o}return!1}(),s={request:function(e){var t=n.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[t]():e[t](i&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[n.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:n};return n?(Object.defineProperties(s,{isFullscreen:{get:function(){return!!document[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[n.fullscreenEnabled]}}}),void(e?t.exports=s:window.screenfull=s)):void(e?t.exports=!1:window.screenfull=!1)}()},{}],6:[function(e,t,n){"use strict";i=e("./debut")},{"./debut":3}]},{},[6]),i});
